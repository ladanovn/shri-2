!function(e){var o={};function r(t){if(o[t])return o[t].exports;var l=o[t]={i:t,l:!1,exports:{}};return e[t].call(l.exports,l,l.exports,r),l.l=!0,l.exports}r.m=e,r.c=o,r.d=function(e,o,t){r.o(e,o)||Object.defineProperty(e,o,{enumerable:!0,get:t})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,o){if(1&o&&(e=r(e)),8&o)return e;if(4&o&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(r.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&o&&"string"!=typeof e)for(var l in e)r.d(t,l,function(o){return e[o]}.bind(null,l));return t},r.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(o,"a",o),o},r.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)},r.p="",r(r.s=1)}([function(e,o,r){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(e,o,r=0){const t=[],l=[];let n=o.start.line,s=o.start.column;return e.split("").forEach((o,c)=>{if(s+=1,"\n"===o&&(n+=1,s=0),"{"===o)l.push({value:"{",column:s,line:n,index:c});else if("}"===o){const o=l.slice(-1)[0];if("{"===o.value){const i=e.slice(o.index,c+1);t.push({value:i,location:{start:{line:o.line,column:o.column},end:{line:n,column:s+1}},level:l.length+r}),l.pop()}}}),t}},function(e,o,r){"use strict";(function(e){var t=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(o,"__esModule",{value:!0});const l=t(r(3));function n(e,o){return new l.default(e,o).lint()}o.default=n,"undefined"!=typeof window?window.lint=n:e.lint=n}).call(this,r(2))},function(e,o){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,o,r){"use strict";var t=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(o,"__esModule",{value:!0});const l=t(r(0)),n=t(r(4)),s=t(r(9)),c=t(r(13));o.default=class{constructor(e,o){this.strJSON=e,this.allRules={warning:n.default,text:s.default,grid:c.default},this.blockErrors=[],this.rules={},this.rulesContext={},Object.values(this.allRules).flat(1).forEach(e=>{this.rules[e.rule]=!o||o[e.rule]})}lint(){return l.default(this.strJSON,{start:{line:1,column:0}}).forEach(e=>{const o=JSON.parse(e.value);o.block&&this.allRules[o.block]&&this.allRules[o.block].forEach(o=>this.lintRule(o,e))}),this.blockErrors}lintRule(e,o){if(this.rules[e.rule]){this.rulesContext[e.rule]||(this.rulesContext[e.rule]={});const r=e.linter.bind(this)(o);r&&r.forEach(e=>this.blockErrors.push(e))}}}},function(e,o,r){"use strict";Object.defineProperty(o,"__esModule",{value:!0});const t=r(5),l=r(6),n=r(7),s=r(8);o.default=[{rule:t.errorCode,linter:t.linter},{rule:l.errorCode,linter:l.linter},{rule:n.errorCode,linter:n.linter},{rule:s.errorCode,linter:s.linter}]},function(e,o,r){"use strict";var t=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(o,"__esModule",{value:!0});const l=t(r(0));o.errorCode="WARNING.INVALID_BUTTON_POSITION",o.errorMessage="The button block in the warning block cannot be in front of the placeholder block",o.linter=function(e){const r=[],t=[];let n=!1;if(JSON.parse(e.value).content.length){l.default(e.value,e.location).forEach(e=>{const l=JSON.parse(e.value);"placeholder"===l.block?(n=!0,t.forEach(e=>{r.push({code:o.errorCode,error:o.errorMessage,location:e})})):"button"===l.block&&(n||t.push(e.location))})}return r}},function(e,o,r){"use strict";var t=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(o,"__esModule",{value:!0});const l=t(r(0)),n=["xxxxxs","xxxxs","xxxs","xxs","xs","s","m","l","xl","xxl","xxxl","xxxxl","xxxxxl"],s=(e,o)=>{return n.findIndex(o=>o===e)-n.findIndex(e=>e===o)==1};o.errorCode="WARNING.INVALID_BUTTON_SIZE",o.errorMessage="The button block size must be 1 step larger than text block",o.linter=function(e){const r=[];if(JSON.parse(e.value).content.length){let t="";const n=[];l.default(e.value,e.location).forEach(l=>{const c=JSON.parse(l.value);if("text"!==c.block||t){if("button"===c.block)if(t){const e=c.mods.size;s(e,t)||r.push({code:o.errorCode,error:o.errorMessage,location:l.location})}else n.push(e.location)}else t=c.mods.size,n.forEach(e=>{const l=c.mods.size;s(l,t)||r.push({code:o.errorCode,error:o.errorMessage,location:e})})})}return r}},function(e,o,r){"use strict";var t=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(o,"__esModule",{value:!0});const l=t(r(0));o.errorCode="WARNING.INVALID_PLACEHOLDER_SIZE",o.errorMessage="Invalid dimensions for placeholder block",o.linter=function(e){const r=[];if(JSON.parse(e.value).content.length){const t=["s","m","l"];l.default(e.value,e.location).forEach(e=>{const l=JSON.parse(e.value);"placeholder"===l.block&&l.mods&&(t.includes(l.mods.size)||r.push({code:o.errorCode,error:o.errorMessage,location:e.location}))})}return r}},function(e,o,r){"use strict";var t=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(o,"__esModule",{value:!0});const l=t(r(0));o.errorCode="WARNING.TEXT_SIZES_SHOULD_BE_EQUAL",o.errorMessage="All texts (blocks of text) in the warning block must be the same size",o.linter=function(e){if(JSON.parse(e.value).content.length){let r="";const t=l.default(e.value,e.location);for(const l of t){const t=JSON.parse(l.value);if("text"===t.block&&t.mods){if(!t.mods.size)return[{code:o.errorCode,error:o.errorMessage,location:e.location}];if(r||(r=t.mods.size),r!==t.mods.size)return[{code:o.errorCode,error:o.errorMessage,location:e.location}]}}}return[]}},function(e,o,r){"use strict";Object.defineProperty(o,"__esModule",{value:!0});const t=r(10),l=r(11),n=r(12);o.default=[{rule:t.errorCode,linter:t.linter},{rule:l.errorCode,linter:l.linter},{rule:n.errorCode,linter:n.linter}]},function(e,o,r){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.errorCode="TEXT.SEVERAL_H1",o.errorMessage="The 1 level heading on the page should be the only one",o.linter=function(e){const r=this.rulesContext[o.errorCode];r.isExistH1=r.isExistH1||!1;const t=[],l=JSON.parse(e.value);return l.mods&&l.mods.type&&"h1"===l.mods.type&&(r.isExistH1?t.push({code:o.errorCode,error:o.errorMessage,location:e.location}):r.isExistH1=!0),t}},function(e,o,r){"use strict";Object.defineProperty(o,"__esModule",{value:!0});const t=(e,o)=>"h2"===e&&"h1"===o||"h3"===e&&"h2"===o;o.errorCode="TEXT.INVALID_H2_POSITION",o.errorMessage="The heading of the 2 level cannot be before the heading of the 1 level at the same or deeper level of nesting",o.linter=function(e){const r=this.rulesContext[o.errorCode];r.prevLevel=r.prevLevel||0,r.prevMaxBlock=r.prevMaxBlock||{value:"",location:{}};const l=[],n=JSON.parse(e.value);if(n.mods&&n.mods.type){if(e.level>r.prevLevel)if(r.prevMaxBlock.value)switch(n.mods.type){case"h1":"h2"===r.prevMaxBlock.value&&l.push({code:o.errorCode,error:o.errorMessage,location:r.prevMaxBlock.location}),r.prevMaxBlock.value="h1";break;case"h2":r.prevMaxBlock.value="h2";break;case"h3":r.prevMaxBlock.value="h3"}else r.prevMaxBlock={value:n.mods.type,location:e.location};else r.prevMaxBlock=t(n.mods.type,r.prevMaxBlock.value)?{value:n.mods.type,location:e.location}:r.prevMaxBlock,t(n.mods.type,r.prevMaxBlock.value)?r.prevMaxBlock={value:n.mods.type,location:e.location}:"h1"===n.mods.type&&"h2"===r.prevMaxBlock.value&&l.push({code:o.errorCode,error:o.errorMessage,location:r.prevMaxBlock.location});r.prevLevel=e.level}return l}},function(e,o,r){"use strict";Object.defineProperty(o,"__esModule",{value:!0});const t=(e,o)=>"h2"===e&&"h1"===o||"h3"===e&&"h2"===o;o.errorCode="TEXT.INVALID_H3_POSITION",o.errorMessage="The heading of the 3 level cannot be before the heading of the 2 level at the same or deeper level of nesting",o.linter=function(e){const r=this.rulesContext[o.errorCode];r.prevLevel=r.prevLevel||0,r.prevMaxBlock=r.prevMaxBlock||{value:"",location:{}};const l=[],n=JSON.parse(e.value);if(n.mods&&n.mods.type){if(e.level>r.prevLevel)if(r.prevMaxBlock.value)switch(n.mods.type){case"h1":r.prevMaxBlock.value="h1";break;case"h2":"h3"===r.prevMaxBlock.value&&l.push({code:o.errorCode,error:o.errorMessage,location:r.prevMaxBlock.location}),r.prevMaxBlock.value="h2";break;case"h3":r.prevMaxBlock.value="h3"}else r.prevMaxBlock={value:n.mods.type,location:e.location};else r.prevMaxBlock=t(n.mods.type,r.prevMaxBlock.value)?{value:n.mods.type,location:e.location}:r.prevMaxBlock,t(n.mods.type,r.prevMaxBlock.value)?r.prevMaxBlock={value:n.mods.type,location:e.location}:"h2"===n.mods.type&&"h3"===r.prevMaxBlock.value&&l.push({code:o.errorCode,error:o.errorMessage,location:r.prevMaxBlock.location});r.prevLevel=e.level}return l}},function(e,o,r){"use strict";Object.defineProperty(o,"__esModule",{value:!0});const t=r(14);o.default=[{rule:t.errorCode,linter:t.linter}]},function(e,o,r){"use strict";var t=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(o,"__esModule",{value:!0});const l=t(r(0)),n=["payment","warning","product","history","cover","collect","articles","subscribtion","event"],s=["commercial","offer"];o.errorCode="GRID.TOO_MUCH_MARKETING_BLOCKS",o.errorMessage="Marketing blocks occupy more than half of all grid block columns",o.linter=function(e){const r=[];let t=0,c=0;if(!JSON.parse(e.value).elem){const i=l.default(e.value,e.location);for(const e of i){const o=JSON.parse(e.value);if(o.content&&o.elemMods&&1===o.content.length){const e=o.content[0].block;n.includes(e)?t+=Number(o.elemMods["m-col"]):s.includes(e)&&(c+=Number(o.elemMods["m-col"]))}}c>t&&r.push({code:o.errorCode,error:o.errorMessage,location:e.location})}return r}}]);